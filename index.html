<html>
  <head>
    <title>Video HTML5 on Desktop on Mobile</title>
  </head>
  <body>
      
      <table style="background-color: #d3d3d3">
        <tr>
          <td>
              <div id="video" style="display:none;">
                  <video id="video-source" 
                  src="http://mirrors.standaloneinstaller.com/video-sample/TRA3106.mp4"
                  muted  autoplay playsinline preload="none"
                  style="width:400px; height:300px;">
                </video>
              </div>
          </td>
          <td style="padding-left: 15px; padding-right: 15px;">
              <h2 id="title"></h2>
              <p><strong>Is Mobile:</strong> <span id="ismobile"></span></p>
              <p><strong>Type of Device:</strong> <span id="name"></span></p>
              <p><strong>Device / Browser Name:</strong> <span id="type"></span></p>
          </td>
        </tr>
      </table>
      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
      <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"a7ee8b1f5c","applicationID":"92413643","transactionName":"ZgZTYRAEXkZSURZdC19McFYWDF9bHH4SdwtfF0NaDglVRxxFC0cBRBM=","queueTime":0,"applicationTime":52,"atts":"SkFQF1geTUg=","errorBeacon":"bam.nr-data.net","agent":""}</script>
      <script type='text/javascript' src="http://wurfl.io/wurfl.js"></script>
      <script>

        //Fill Device Information
        if(WURFL.is_mobile){
          $('#ismobile').html('True');
        }
        else{
          $('#ismobile').html('False');
        }
        $('#type').html(WURFL.complete_device_name);
        $('#name').html(WURFL.form_factor);
        
        //Check if Device can run HTML5 Video in Muted Autoplay [using HTMLMediaElement.play()]
        //You can read more about that in: https://bitmovin.com/play-not-play-new-autoplay-policies-safari-11-chrome-64/
        var playPromise = document.getElementById('video-source').play();

        //This code only works on browsers with the HTMLMediaElement.play() function
        //Chrome, Safari and Firefox
        if(checkBrowser() == 'chrome' || checkBrowser() == 'safari' || checkBrowser() == 'firefox'){

          if (playPromise !== undefined) {
            playPromise.then(function() {

              // # Tablets #
              if(WURFL.form_factor == "Tablet"){
                showVideo(); //Shows Image
              }

              // # Smartphone #
              else if(WURFL.form_factor == "Smartphone"){

                //Check UserAgent
                var userAgent = navigator.userAgent || navigator.vendor || window.opera;

                // Windows Phone
                if (/windows phone/i.test(userAgent)) {
                  dontShowVideo()
                }

                //IOS
                //Iphone
                else if (/iPhone/.test(userAgent) && !window.MSStream) {

                  var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
                  var ver = [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];

                  if (/iP(hone|od|ad)/.test(navigator.platform)) {

                    //Version below 10
                    if(ver[0]<10){
                      dontShowVideo()
                    }

                    //Version above 10
                    else{
                        showVideo(); //Shows Video
                    }
                  }
                }

                //Ipad
                else if (/iPad/.test(userAgent) && !window.MSStream) {

                  if (/iP(hone|od|ad)/.test(navigator.platform)) {

                    //Version above 10
                    if(ver[0]<10){
                      dontShowVideo()
                    }
                  }
                }

                //Android
                else if (/android/i.test(userAgent)) {
                  showVideo();
                }

                //Unknown OS
                else{
                  dontShowVideo()
                }
              }

              // # Desktop #
              else if(WURFL.form_factor == "Desktop"){
                showVideo();
              }

              // # Unknown Device #
              else{
                dontShowVideo()
              }
            }).catch(function(error) {
              dontShowVideo()
            });
          }
          else{
            dontShowVideo()
          }
        }
        else{
          $('#title').html('This Browser Does not support HTMLMediaElement.play()');
        }

        //Mostra o Vídeo
        function showVideo(){
            //Changes Title
            $('#title').html('Vídeo HTML5 Autoplay works <br />on this Device and Browser');
            $('#video').show();
        }

        function dontShowVideo(){
          //Changes Title
          $('#title').html('Vídeo HTML5 Autoplay does not work <br />on this Device and Browser');
        }

        //Mostra a Imagem Novamente ao Encerrar o Vídeo
        document.getElementById('video-source').addEventListener('ended',myHandler,false);
        function myHandler(e) {
          $('#video').hide();
        }

        function checkBrowser(){

          isIE = /*@cc_on!@*/false || !!document.documentMode;
          isEdge = !isIE && !!window.StyleMedia;
          if(navigator.userAgent.indexOf("Chrome") != -1 && !isEdge){
              return 'chrome';
          }
          else if(navigator.userAgent.indexOf("Safari") != -1 && !isEdge){
              return 'safari';
          }
          else if(navigator.userAgent.indexOf("Firefox") != -1 ){
              return 'firefox';
          }
        }
    </script>
  </body>
</html>
